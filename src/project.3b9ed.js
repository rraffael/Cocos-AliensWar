window.__require=function t(e,i,n){function c(r,a){if(!i[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var h="function"==typeof __require&&__require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+r+"'")}}var d=i[r]={exports:{}};e[r][0].call(d.exports,function(t){return c(e[r][1][t]||t)},d,d.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)c(n[r]);return c}({Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"8604922LLZGyKUtJZM6CcNL","Bullet"),cc.Class({extends:cc.Component,properties:{direction:cc.v2(0,0),speed:600},onCollisionEnter:function(t,e){var i=t.getComponent("Character");null!=i?i.damaged(2):t.node.destroy(),e.node.destroy()},start:function(){},update:function(t){var e=this.direction.mul(this.speed*t);this.node.position=this.node.position.add(e)}}),cc._RF.pop()},{}],Character:[function(t,e,i){"use strict";cc._RF.push(e,"aaba2DS9vJDyaGulA3kDx24","Character");var n=cc.Class({extends:cc.Component,properties:{bulletPrefab:cc.Prefab},damaged:function(){},calcDirection:function(t){var e=t.sub(this.node.position);return e=e.normalize()},calcRotation:function(t){var e=Math.atan2(t.y,t.x);return e*=180/Math.PI},onLoad:function(){}});e.exports=n,cc._RF.pop()},{}],EnemyGenerator:[function(t,e,i){"use strict";cc._RF.push(e,"ab48bQv5wFE36uQsTXIehgn","EnemyGenerator"),cc.Class({extends:cc.Component,properties:{enemyPrefab:cc.Prefab,area:200,timer:2,timerCooldown:3},onLoad:function(){this.scheduleOnce(this.initializeGeneration,this.timerCooldown)},generate:function(){var t=cc.instantiate(this.enemyPrefab);t.parent=this.node.parent;var e=new cc.v2(Math.random()-.5,Math.random()-.5);e=(e=e.normalize()).mul(this.area),e=this.node.position.add(e),t.position=e},initializeGeneration:function(){this.schedule(this.generate,this.timer)},start:function(){}}),cc._RF.pop()},{}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"bbb02g3iNhFCLJwgKjzLYAI","Enemy");var n=t("Character");cc.Class({extends:n,properties:{_target:cc.Node,speed:50,cooldown:1,_direction:cc.Vec2},onLoad:function(){this._target=cc.find("hero"),this.schedule(this.fire,this.cooldown)},changeDirection:function(){this._direction=this.calcDirection(this._target.position),this.node.angle=this.calcRotation(this._direction)},damaged:function(){this._target.getComponent("Player").addScore(10),this.node.destroy()},fire:function(){var t=cc.instantiate(this.bulletPrefab);t.parent=this.node.parent,t.position=this.node.position,t.group=this.node.group,t.getComponent("Bullet").direction=this._direction},start:function(){},update:function(t){this.changeDirection();var e=this._direction.mul(this.speed*t);this.node.position=this.node.position.add(e)}}),cc._RF.pop()},{Character:"Character"}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"d7388hSnS1Pw6ZnYigqtC1K","Player");var n=t("Character");cc.Class({extends:n,properties:{speed:200,maxHealth:100,_health:0,lifeBar:cc.ProgressBar,score:0,label:cc.Label,_aim:cc.Vec2,_direction:cc.Vec2},onLoad:function(){this._health=this.maxHealth,this.lifeBar.progress=1,this._direction=new cc.v2(0,0),cc.director.getCollisionManager().enabled=!0;var t=cc.find("Canvas");t.on("mousemove",this.changeAim,this),t.on("mousedown",this.fire,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.startMovement,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.endMovement,this)},startMovement:function(t){switch(t.keyCode){case cc.macro.KEY.w:this._direction=new cc.v2(this._direction.x,1);break;case cc.macro.KEY.s:this._direction=new cc.v2(this._direction.x,-1);break;case cc.macro.KEY.d:this._direction=new cc.v2(1,this._direction.y);break;case cc.macro.KEY.a:this._direction=new cc.v2(-1,this._direction.y)}},endMovement:function(){switch(event.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.s:this._direction=new cc.v2(this._direction.x,0);break;case cc.macro.KEY.d:case cc.macro.KEY.a:this._direction=new cc.v2(0,this._direction.y)}},fire:function(){var t=cc.instantiate(this.bulletPrefab);t.parent=this.node.parent,t.position=this.node.position,t.group=this.node.group,t.getComponent("Bullet").direction=this._aim},changeAim:function(t){var e=t.getLocation();e=new cc.v2(e.x,e.y),this._aim=this.calcDirection(e),this.node.angle=this.calcRotation(this._aim)},damaged:function(t){this._health-=t,this.lifeBar.progress=this._health/this.maxHealth,this._health<=0&&cc.director.loadScene("GameOver")},addScore:function(t){this.score+=t,this.label.string="Pontos: "+this.score},start:function(){},update:function(t){var e=this._direction.mul(this.speed*t);this.node.position=this.node.position.add(e)}}),cc._RF.pop()},{Character:"Character"}]},{},["Enemy","EnemyGenerator","Player","Bullet","Character"]);